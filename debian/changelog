voice-keyboard-perlover (1.6.1-1) noble; urgency=medium

  * Fix ffmpeg subprocess pipe deadlock causing empty recordings on long inputs
  * Redirect ffmpeg stdout/stderr to DEVNULL instead of PIPE to prevent buffer fill

 -- perlover <perlover@perlover.com>  Sun, 02 Feb 2026 21:00:00 +0100

voice-keyboard-perlover (1.6.0-1) noble; urgency=medium

  * Switch audio format from M4A/AAC to OGG/Opus
  * Fix "invalid_request_error" from OpenAI API due to corrupt M4A files
  * OGG/Opus is a streaming format that doesn't require finalization
  * Increase ffmpeg termination timeout from 2s to 5s

 -- perlover <perlover@perlover.com>  Sun, 29 Dec 2025 21:00:00 +0100

voice-keyboard-perlover (1.5.3-1) noble; urgency=medium

  * Fix infinite animation on transcription errors
  * Remove undefined EXIT_NEEDS_TYPING constant causing ReferenceError
  * Add conditional debug logging (create ~/.voice-keyboard-debug to enable)

 -- perlover <perlover@perlover.com>  Thu, 19 Dec 2025 19:45:00 +0100

voice-keyboard-perlover (1.5.1-1) noble; urgency=medium

  * Fix transcription hanging when OpenAI API does not respond
  * Add watchdog timer (60s) to automatically cancel stuck processing
  * Change API timeout from 120s to (10s connect, 30s read)
  * Improve timeout error messages for better user feedback
  * Add request timing logs for diagnostics

 -- perlover <perlover@perlover.com>  Sun, 08 Dec 2025 19:00:00 +0100

voice-keyboard-perlover (1.5.0-1) noble; urgency=medium

  * Fix system freezes caused by Hot Corner conflicts during voice recording
  * Remove scale animations (scale_x, scale_y) that triggered layout thrashing
  * Replace this.actor.ease() with GLib.timeout_add for GC-safe animations
  * Remove _fadeIn/_fadeOut methods that created ClutterPropertyTransition objects
  * New _animateRecordingStep() using simple timeout-based opacity changes
  * Animations now only use opacity (255â†”77) without size changes
  * Prevents "Attempting to call back into JSAPI during GC sweep" errors
  * Code simplified: -113 lines removed, +59 lines added

 -- perlover <perlover@perlover.com>  Fri, 05 Dec 2025 12:51:00 +0100

voice-keyboard-perlover (1.4.0-1) noble; urgency=medium

  * Simplify paste method: remove option, use only Clipboard + Shift+Insert
  * Remove PRIMARY selection middle-click paste method (~180 lines of code)
  * Remove STATE_TYPING state and related UI code from applet
  * Remove paste-method setting from settings schema
  * Fix potential compositor conflicts during workspace switching
  * Change animation priority from HIGH to DEFAULT to avoid conflicts with Expo
  * Remove queue_redraw() call - Clutter handles redraws automatically
  * Fix St-CRITICAL cr_parser errors by using null instead of empty style

 -- perlover <perlover@perlover.com>  Wed, 04 Dec 2024 14:00:00 +0100

voice-keyboard-perlover (1.3.3-1) noble; urgency=medium

  * Replace gpt-4o-audio-preview with gpt-4o-transcribe model
  * gpt-4o-transcribe is designed for speech-to-text (best accuracy)
  * Uses same API as Whisper, simpler and more reliable
  * Removed ~160 lines of complex gpt-4o-audio-preview code
  * Add deps-install target to Makefile for automatic build dependencies

 -- perlover <perlover@perlover.com>  Mon, 25 Nov 2024 14:00:00 +0000

voice-keyboard-perlover (1.3.1-1) noble; urgency=medium

  * Fix Shift+Insert paste in terminals (gnome-terminal, etc.)
  * Copy text to both CLIPBOARD and PRIMARY selections
  * Terminals use PRIMARY for Shift+Insert, GUI apps use CLIPBOARD

 -- perlover <perlover@perlover.com>  Sat, 23 Nov 2024 18:00:00 +0000

voice-keyboard-perlover (1.3.0-1) noble; urgency=medium

  * Replace slow xdotool type with fast Clipboard + Shift+Insert paste
  * Add automatic window focus restoration before paste
  * Remove PRIMARY selection clearing after paste
  * Force migrate existing users from middle-click to clipboard paste method
  * Significantly improved paste speed for long texts and Unicode (Russian, etc.)

 -- perlover <perlover@perlover.com>  Sat, 23 Nov 2024 17:00:00 +0000

voice-keyboard-perlover (1.2.1-1) noble; urgency=medium

  * Change default paste method to xdotool type for better reliability
  * xdotool type works correctly in all apps regardless of mouse cursor position
  * Middle-click paste still available as option for users who prefer it

 -- perlover <perlover@perlover.com>  Sat, 23 Nov 2024 15:00:00 +0000

voice-keyboard-perlover (1.2.0-1) noble; urgency=medium

  * Add configurable paste method setting (PRIMARY selection or xdotool type)
  * Add PRIMARY selection + middle-click paste method (default, fast)
  * Add xdotool type paste method with keyboard icon during typing
  * Fix animation freeze caused by xdotool type blocking X11 event loop
  * Add xclip dependency for clipboard operations
  * Clear PRIMARY selection after paste for security
  * Use GLib.idle_add for proper icon rendering before xdotool starts

 -- perlover <perlover@perlover.com>  Fri, 22 Nov 2024 01:00:00 +0000

voice-keyboard-perlover (1.1.1-1) noble; urgency=medium

  * Add synchronized opacity + scale pulsing animation for recording icon
  * Add pulsing animation for processing icon (cloud-upload)
  * Change processing icon to cloud-upload for clearer visual feedback
  * Switch audio format from WAV to M4A/AAC for faster API uploads
  * Reduce audio file size by 4-5x for improved transcription speed

 -- perlover <perlover@perlover.com>  Thu, 21 Nov 2024 19:30:00 +0000

voice-keyboard-perlover (1.1.0-1) noble; urgency=medium

  * Add GPT-4o Audio model support for advanced transcription
  * Add model selection in settings (Whisper-1 vs GPT-4o Audio)
  * Enhance README with comprehensive faster-whisper-server documentation
  * Add Docker installation instructions for local Whisper server
  * Document model comparison, costs, and use cases
  * Fix left-click event handling for voice recording
  * Improve processing animation (use system icon instead of custom widgets)

 -- perlover <perlover@perlover.com>  Thu, 21 Nov 2024 12:00:00 +0000

voice-keyboard-perlover (1.0.0-1) noble; urgency=medium

  * Initial release
  * Cinnamon applet with keyboard layout switcher
  * Voice input via OpenAI Whisper API
  * Voice input via local Whisper server support
  * Configurable recording duration and language
  * Automatic text insertion via xdotool
  * Support for Ubuntu 24.04 and Linux Mint 22.2

 -- perlover <perlover@perlover.com>  Wed, 20 Nov 2024 12:00:00 +0000
